<!--**********************************************************************************************
 * This file is part of the Nebula Logger project, released under the MIT License.               *
 * See LICENSE file or go to https://github.com/jongpie/NebulaLogger for full license details.   *
 **********************************************************************************************-->

<template>
  <template if:true={showComponent}>
    <article class="slds-card slds-card_boundary">
      <div class="slds-card__header slds-grid">
        <header class="slds-media slds-media_center slds-has-flexi-truncate">
          <div class="slds-media__figure">
            <lightning-icon icon-name="custom:custom83" size="small"></lightning-icon>
          </div>
          <div class="slds-media__body slds-m-bottom_small">
            <h2 class="slds-card__header-title">
              <span class="slds-truncate">{title}</span>
            </h2>
          </div>
          <div class="slds-no-flex">
            <lightning-input
              class="slds-m-right_xx-small"
              data-id="enter-search"
              placeholder="Search"
              type="search"
              value={search}
              onchange={handleSearchChange}
              style="display: inline-block"
              variant="label-hidden"
            ></lightning-input>
            <lightning-button-icon icon-name="utility:refresh" onclick={refresh}></lightning-button-icon>
          </div>
        </header>
      </div>
      <div class="slds-card__body">
        <lightning-spinner if:true={isLoading} size="small"></lightning-spinner>
        <div class="slds-is-relative" if:true={queryResult}>
          <lightning-datatable
            key-field="id"
            show-row-number-column="true"
            data={queryResult.records}
            columns={queryResult.fieldSet.fields}
            onsort={handleSort}
            sorted-by={sortBy}
            sorted-direction={sortDirection}
            default-sort-direction={sortDirection}
          ></lightning-datatable>
        </div>
      </div>
    </article>
  </template>
</template>
