<!--**********************************************************************************************
 * This file is part of the Nebula Logger project, released under the MIT License.               *
 * See LICENSE file or go to https://github.com/jongpie/NebulaLogger for full license details.   *
 **********************************************************************************************-->

<template>
  <template if:false={hasLoaded}>
    <div class="slds-is-relative" style="min-height: 6em">
      <lightning-spinner></lightning-spinner>
    </div>
  </template>

  <template if:true={hasLoaded}>
    <template if:false={showSection}>
      <div class="slds-notify slds-notify_alert slds-alert_info" role="alert">
        <span class="slds-assistive-text">info</span>
        <lightning-icon class="slds-m-right_x-small" icon-name="utility:info" size="x-small" variant="inverse"></lightning-icon>
        <h2>No {sectionTitle} data available for this log entry.</h2>
      </div>
    </template>
  </template>

  <template if:true={showSection}>
    <c-logger-page-section>
      <span slot="title">
        <template if:true={sectionIcon}>
          <lightning-icon icon-name={sectionIcon} size="x-small" class="slds-m-right_x-small"></lightning-icon>
        </template>
        {sectionTitle}
      </span>
      <span slot="content">
        <lightning-layout multiple-rows vertical-align="start">
          <template for:each={sectionFields} for:item="field">
            <lightning-layout-item key={field.apiName} size="12">
              <div class="slds-form-element">
                <template if:true={field.useCodeViewer}>
                  <c-logger-code-viewer code={field.value} language={field.codeViewerLanguage} data-id={field.apiName}
                    ><span slot="title">{field.label}</span></c-logger-code-viewer
                  >
                </template>
                <template if:false={field.useCodeViewer}>
                  <label class="slds-form-element__label">{field.label}</label>
                  <div class="slds-form-element__control">
                    <template if:true={field.isLongText}>
                      <lightning-textarea value={field.value} read-only variant="label-hidden" rows="5"></lightning-textarea>
                    </template>
                    <template if:false={field.isLongText}>
                      <template if:true={field.isNumber}>
                        <lightning-formatted-number value={field.value} class="slds-form-element__static"></lightning-formatted-number>
                      </template>
                      <template if:false={field.isNumber}>
                        <lightning-formatted-text value={field.value} class="slds-form-element__static"></lightning-formatted-text>
                      </template>
                    </template>
                  </div>
                </template>
              </div>
            </lightning-layout-item>
          </template>
        </lightning-layout>
      </span>
    </c-logger-page-section>
  </template>
</template>
